// .sequelizerc - Sequelize CLI Configuration
const path = require('path');
const fs = require('fs');

// Check for migrations-specific compiled output (CommonJS .cjs format for Sequelize CLI)
const distMigrationsExists = fs.existsSync(path.resolve('dist-migrations/migrations')) && 
                              fs.readdirSync(path.resolve('dist-migrations/migrations')).some(file => file.endsWith('.cjs'));
const distSeedersExists = fs.existsSync(path.resolve('dist-migrations/seeders')) && 
                          fs.readdirSync(path.resolve('dist-migrations/seeders')).some(file => file.endsWith('.cjs'));

module.exports = {
  'config': path.resolve('src/config', 'config.cjs'),  // Always use CommonJS config for CLI
  'models-path': path.resolve('src', 'models'),        // Always use source models for CLI
  'seeders-path': distSeedersExists ? 
    path.resolve('dist-migrations', 'seeders') : 
    path.resolve('src', 'seeders'),
  'migrations-path': distMigrationsExists ? 
    path.resolve('dist-migrations', 'migrations') : 
    path.resolve('src', 'migrations')
};