# ============================================================================
# HEALTHAPP LOCAL DEVELOPMENT ENVIRONMENT CONFIGURATION
# ============================================================================
# Environment: Local development with Docker Compose
# Used by: deploy-local.sh script and local development containers
# 
# PURPOSE: This file contains all environment variables needed for local
# development using Docker Compose. All values are safe for development.
# 
# USAGE: Copy this file to .env.local in your project root, or use the
# deploy-local.sh script which will automatically configure these values.
# ============================================================================

# ============================================================================
# NEXT.JS APPLICATION SETTINGS (Local Development)
# Used by: Next.js frontend container, hot-reload development server
# Where: Frontend container (port 3002), browser client-side code
# ============================================================================
NODE_ENV=development                    # Enables development features and debugging
PORT=3002                              # Frontend development server port
NEXT_PUBLIC_API_URL=http://localhost:3005/api  # Backend API endpoint for frontend calls
NEXT_PUBLIC_FRONTEND_URL=http://localhost:3002  # Frontend URL for redirects and links

# Hot-reload configuration for development
WATCHPACK_POLLING=true                  # Enable file watching for hot-reload
WDS_SOCKET_HOST=localhost               # WebSocket host for hot-reload
WDS_SOCKET_PORT=3002                    # WebSocket port for hot-reload

# ============================================================================
# DATABASE CONFIGURATION (PostgreSQL with Prisma)
# Used by: Backend container, Prisma migrations, database connections
# Where: Backend container connects to postgres container (internal network)
# ============================================================================
DATABASE_URL="postgresql://healthapp_user:dev_password@postgres:5432/healthapp_dev?schema=public"
POSTGRES_HOST=postgres                  # Docker service name (internal network)
POSTGRES_PORT=5432                     # Standard PostgreSQL port (internal)
POSTGRES_DB=healthapp_dev               # Development database name
POSTGRES_USER=healthapp_user            # Database user for development
POSTGRES_PASSWORD=dev_password          # Simple password for local development

# Prisma development configuration
PRISMA_DEBUG=true                      # Enable Prisma query debugging
PRISMA_SLOW_QUERIES=true               # Log slow queries for optimization

# ============================================================================
# REDIS CONFIGURATION (Session Storage & Caching)
# Used by: Backend container for session management and caching
# Where: Backend connects to redis container (internal Docker network)
# ============================================================================
REDIS_HOST=redis                       # Docker service name (internal network)
REDIS_PORT=6379                        # Standard Redis port (internal)
REDIS_PASSWORD=dev_redis_password       # Simple password for local development

# ============================================================================
# NEXTAUTH.JS AUTHENTICATION (Development)
# Used by: Next.js API routes, authentication pages, session management
# Where: Frontend container API routes, browser cookies
# ============================================================================
NEXTAUTH_URL=http://localhost:3002      # NextAuth.js canonical URL for development
NEXTAUTH_SECRET=local-dev-nextauth-secret-key  # Development secret (not secure)
JWT_SECRET=local-dev-jwt-secret-key-12345       # Development JWT secret (not secure)

# Session configuration for development (longer timeouts for convenience)
SESSION_TIMEOUT=86400000               # 24 hours in milliseconds (dev convenience)
JWT_EXPIRES_IN=24h                     # JWT token expiration (24 hours for dev)
SESSION_MAX_AGE=86400                  # NextAuth session max age (24 hours for dev)

# ============================================================================
# CORS AND SECURITY (Development - Permissive)
# Used by: Backend CORS middleware, security headers
# Where: Backend container API responses
# ============================================================================
CORS_ORIGIN=http://localhost:3002      # Frontend URL for CORS (matches frontend)
FRONTEND_URL=http://localhost:3002     # Used by CORS and redirect logic
BACKEND_URL=http://backend:3005        # Backend URL for internal communication

# ============================================================================
# EMAIL CONFIGURATION (Development - Console Logging)
# Used by: Email service for testing notifications
# Where: Backend container email service (logs to console)
# ============================================================================
EMAIL_HOST=localhost                   # Not used in development (console logging)
EMAIL_PORT=1025                       # MailHog SMTP port for development
EMAIL_USER=dev@healthapp.com          # Development email sender
EMAIL_PASS=                           # No password needed for development

# ============================================================================
# FILE STORAGE (Development - Local File System)
# Used by: File upload services for patient documents
# Where: Backend container local storage
# ============================================================================
AWS_ACCESS_KEY_ID=dev_access_key       # Not used in development
AWS_SECRET_ACCESS_KEY=dev_secret_key   # Not used in development
AWS_REGION=us-east-1                   # Default region for development
AWS_S3_BUCKET=healthapp-dev-uploads    # Local storage bucket simulation

# ============================================================================
# LOGGING AND DEBUGGING (Development - Verbose)
# Used by: Application logging, error tracking, development debugging
# Where: Backend container console output, log files
# ============================================================================
DEBUG=healthapp:*                      # Enable all debug namespaces
LOG_LEVEL=debug                        # Verbose logging for development
NEXT_TELEMETRY_DISABLED=1              # Disable Next.js telemetry

# ============================================================================
# RATE LIMITING (Development - Relaxed)
# Used by: API rate limiting middleware
# Where: Backend container API endpoints
# ============================================================================
RATE_LIMIT_WINDOW_MS=60000             # 1 minute window for development
RATE_LIMIT_MAX_REQUESTS=1000           # High limit for development

# ============================================================================
# HEALTHCARE SPECIFIC SETTINGS (Development)
# Used by: Healthcare business logic, HIPAA compliance simulation
# Where: Backend container healthcare services
# ============================================================================
PHI_ENCRYPTION_KEY=dev_phi_key_32_chars_simulation  # Simulated PHI encryption
AUDIT_LOG_RETENTION_DAYS=30            # Short retention for development
ENABLE_HIPAA_AUDIT=false               # Disable HIPAA auditing in development

# ============================================================================
# DEVELOPMENT TOOLS AND TESTING
# Used by: Testing framework, development utilities
# Where: Test containers, development debugging
# ============================================================================
ENABLE_API_DOCS=true                   # Enable API documentation endpoint
ENABLE_GRAPHQL_PLAYGROUND=true         # Enable GraphQL playground (if used)
MOCK_EXTERNAL_SERVICES=true            # Mock external service calls

# ============================================================================
# DOCKER COMPOSE SPECIFIC SETTINGS
# Used by: docker-compose.yml configuration, service networking
# Where: Docker Compose service definitions
# ============================================================================
COMPOSE_PROJECT_NAME=healthapp-local   # Docker Compose project name
DOCKER_BUILDKIT=1                      # Enable Docker BuildKit for faster builds

# ============================================================================
# APPLICATION VERSION
# Used by: Version display, Docker image tagging
# Where: Application header, about page
# ============================================================================
VERSION=dev-$(date +%Y%m%d)            # Dynamic development version